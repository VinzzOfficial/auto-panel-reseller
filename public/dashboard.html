<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>ðŸ“Š Dashboard Reseller</h2>
  <pre id="info">Loading...</pre>

  <h3>âž• Buat Sub-Reseller</h3>
  <input id="ruser" placeholder="Username">
  <input id="rpass" placeholder="Password">
  <input id="rlimit" placeholder="Limit Server">
  <button onclick="createReseller()">Create</button>
</div>

<script>
async function load() {
  const res = await fetch("/me", {
    headers: { "Authorization": localStorage.token }
  });
  info.innerText = JSON.stringify(await res.json(), null, 2);
}
load();

async function createReseller() {
  const res = await fetch("/create-reseller", {
    method: "POST",
    headers: {
      "Content-Type":"application/json",
      "Authorization": localStorage.token
    },
    body: JSON.stringify({
      username: ruser.value,
      password: rpass.value,
      limit_server: parseInt(rlimit.value)
    })
  });
  alert((await res.json()).status);
}
</script>

</body>
</html>
